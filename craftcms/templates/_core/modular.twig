{## Macros for rending Fragments outsite of Builders
 ------------------------------------------------------------------------------------ ##
    {% import "_core/modular" as modular %}

    {{ modular.fragmentId( 123 ) }}
    {{ modular.fragmentSlug( 'slug' ) }}
    {{ modular.fragmentPreset( 'preset-id-123' ) }}

 ------------------------------------------------------------------------------------ ##}

{% macro loadById( id ) %}
    {% set modular = craft.entries().section('modular').id(id).one()|default() %}
    {% if modular.contentBuilder|default() %}
        {% from "_core/blocks/assemble" import content as buildContent %}
        {{ buildContent( modular.contentBuilder.all(), 'tablet' ) }}
    {% endif %}
{% endmacro %}


{%- macro loadBySlug( slug, entry ) -%}
    {% set modular = craft.entries().section('modular').slug(slug).one() ??? null %}
    {% if modular %}
        {{ include( '_components/builders/builderContent.twig', {
            entry: modular
        }, withContext = false) }}
    {% endif %}
{%- endmacro -%}


{%- macro loadByPresetID( presetID, entry ) -%}
    {% set modular = craft.entries().section('modular').preset(presetID).one() ??? null %}

    {% if modular %}
        {{ include( '_components/builders/builderContent.twig', {
            entry: modular
        }, withContext = false) }}
    {% endif %}
{%- endmacro -%}
