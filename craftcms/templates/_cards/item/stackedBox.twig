{% set entry = entry ?? null %}
{% set _base = {
    baseCard          : "_cards/item/_base",
    imageTransform    : 'square',
    imageClass        : "aspect-square w-full",
    cell2Class        : "bg-shadow-300/20 p-4 flex-grow flex flex-col gap-3 removeLastChildMargin",
    itemTagClass      : "flex flex-col h-full",

    itemParagraphClass: "flex-grow",
} %}

{## merge `_base` into variables passed into the template  ##}
{% set settings = ( settings is defined and settings is iterable ) ? settings|merge(_base) : _base %}

{## output the appropriate card ##}
{% set className = className(entry)|t ??? null %}
{% set isProduct = 'Product' in className ? 'product' : '' %}
{% set section   = entry.section.handle ??? isProduct ??? null %}
{% set entryType = entry.type.handle    ??? null %}

{% embed [ "_cards/#{section}.#{entryType}",
      "_cards/#{section}",
      settings.baseCard
    ] with {
      entry: entry,
      settings: settings
    } %}

    {% block summary %}

    {% endblock %}

{% endembed %}