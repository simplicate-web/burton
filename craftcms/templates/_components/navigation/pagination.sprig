{% set _base = {
    currentPage: pageInfo.currentPage ??? 1,
    totalPages : pageInfo.totalPages  ??? 0,
    query      : searchParams.query   ??? '',
    filter     : searchParams.filter  ??? null,
    active     : "",
    disabled   : "cursor-not-allowed opacity-50",
} %}

{## merge `_base` into variables passed into the template  ##}
{% set settings = ( settings is defined and settings is iterable ) ? settings|merge(_base) : _base %}

{% macro urlWithQueryParams( entryUrl, page, params ) -%}
    {%- set baseUrl  = ( page > 1 ) ? "#{entryUrl}/p#{page}/" : "#{entryUrl}/" -%}
    {{ siteUrl( baseUrl, params ) }}
{%- endmacro %}

{% if settings.totalPages > 1 %}
    <nav
        class="py-10 w-full max-w-xs mx-auto text-center"
        role="navigation"
        aria-label="Pagination Navigation"
    >
        <ul class="flex mb-6">
            <li class="w-1/2">
                {% set prevClass = settings.currentPage > 1 ? settings.active : settings.disabled %}
                <a class="{{prevClass}}"
                    href="{{ _self.urlWithQueryParams(
                        settings.entryUrl,
                        settings.currentPage - 1,
                        { q: settings.query, f: settings.filter }
                    ) }}"
                    sprig
                    s-val:page="{{ settings.currentPage - 1 }}"
                    s-val:query="{{ settings.query }}"
                    s-val:filter="{{ settings.filter }}"
                    s-trigger="click"
                >{{"← Previous"|t}}</a>
            </li>

            <li class="w-1/2">
                {% set nextClass = settings.currentPage != settings.totalPages ? settings.active : settings.disabled %}
                <a class="{{nextClass}}"
                    href="{{ _self.urlWithQueryParams(
                        settings.entryUrl,
                        settings.currentPage + 1,
                        { q: settings.query, f: settings.filter }
                    ) }}"
                    sprig
                    s-val:page="{{ settings.currentPage + 1 }}"
                    s-val:query="{{ settings.query }}"
                    s-val:filter="{{ settings.filter }}"
                    s-trigger="click"
                >{{"Next →"|t}}</a>
            </li>
        </ul>

        <p>
            Page <strong>{{settings.currentPage}} <span>of</span> {{settings.totalPages}}</strong>
        </p>
    </nav>
{% endif %}