{## Card Rendering
 ------------------------------------------------------------------------------------ ##

    Maintains consistency rendering the proper cards.

    {% import "_components/cards" as cards %}
    {{ cards.render( item, 'standard', { additional: 'settings' } ) }}

 ------------------------------------------------------------------------------------ ##}
{% macro deck( collection, layout, settings ) %}
    {% for item in collection %}
        {{ _self.render( item, layout, settings, loop ) }}
    {% endfor %}
{% endmacro %}


{## Render a card
 ------------------------------------------------------------------------------------ ##}
{% macro render( item, layout, settings = null, loop = null, blockName ) %}

    {## allow `layout` to be passed as an array ##}
    {% set layout = layout is iterable ? layout : [layout] %}
    {% set layout = layout | map( layout => "_components/cards/card.#{layout}" ) %}

    {## TODO: build a path dynamically based on the card / settings / purpose
     -------------------------------------------------------------------------------- ##}
    {% embed layout with {
        blockName: blockName ??? null,
        item     : item ??? null,
        settings : settings,
        loop     : loop
    } %}
        {% block content %}{{
            blockName
                ? block( blockName )
                : parent()
         }}{% endblock %}
    {% endembed %}
{% endmacro %}


{## Short-cut to just get the card title
 ------------------------------------------------------------------------------------ ##}
{% macro title( item, layout, settings = null, loop = null ) %}
    {{ _self.render( item, layout, settings, loop, 'card_title' ) }}
{% endmacro %}