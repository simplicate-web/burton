{## Image Block Base
 ------------------------------------------------------------------------------------ ##
    New block variations should extend this template rather than `_blocks/_common`.

    i.e. {% extends "_blocks/image" %}
 ------------------------------------------------------------------------------------ ##}
{% extends "_blocks/_common" %}


{## Micro-layouts are defined and documented within `_layouts/base/micro`

    View: http://localhost/sitebook/layouts/micro-layouts
    Docs: http://buildwithburton.com/docs/micro-layouts

 ------------------------------------------------------------------------------------ ##}
{% import "_layouts/base/micro" as micro %}

{% block content %}

    {% set container   = block.settings.container   ??? null %}
    {% set variant     = block.settings.variant     ??? null %}
    {% set microLayout = block.settings.microLayout ??? null %}

    {## modify left/right layouts when using anything other than 'auto' variant to make sure that
        the text aligns center vertically if there's more image than text ##}
    {% if microLayout in ["leftRight","rightLeft"] and variant != 'auto' %}
        {% set microLayout = [microLayout, "vertCenter"] %}
    {% endif %}

    {{ micro.layout(
        [
            block('content_text'), block('content_images'),
            block('block_header'), block('block_footer')
        ],
        microLayout,
        container
    ) }}

{% endblock content %}


{% block content_images %}

    {% embed
         imageLayout ??? block.settings.imageLayout ??? '_components/images/layout.auto'
       with {
         images  : images     ??? block.images.all() ??? null,
         frame   : imageFrame ??? block.settings.imageFrame ??? 'auto',
         settings: settings   ??? block.settings ??? null
    } %}{% endembed %}

{% endblock %}