{## Rich Media Block Template
   -------------------------------------------------------------------------- ##
   this template is meant to be included via `templates/_blocks/_base.twig`

   it *can* be called directly with {{ include }} or {% embed %}, but it might
   be more trouble than it's worth to prep and format the necessary inputs.

   instead, if you want to display content for a Craft MatrixBlock element,
   start with the block base template

     -> templates/_blocks/_base.twig

   the block base template is responsible for sanitizing and normalizing all
   MatrixBlock content and layout settings before calling a template like this.

   if you're trying to create a similar layout or functionality using content
   that didn't come from a MatrixBlock, consider using {% embed %} to create
   a grid and overload {% block %} elements as neccesary.
 # -------------------------------------------------------------------------- ##}
{% set settings  = settings  ??? null %}
{% set content   = content   ??? null %}
{% set textParts = textParts ??? null %}

{% if settings.grid %}
    {% embed settings.grid %}

        {% block cell1 %}
            {% set text = ( textParts.eyebrow ~ textParts.headline ~ textParts.body ~ textParts.cta ) ??? text ??? content.text ??? null %}
            {{ text|raw }}
        {% endblock %}

        {% block cell2 %}
            {% set source = source ??? content.source ??? null %}
            {% set urls   = urls   ??? content.urls   ??? null %}
            {% set assets = assets ??? content.assets.all() ??? null %}

            {% set urls   = ( source == 'external' or ( urls and not assets ) ) ? urls   : null %}
            {% set assets = ( source == 'local'    or ( assets and not urls ) ) ? assets : null %}

            {% import "_macros/embed" as embedExternal %}

            {% for exMedia in urls %}
                {{ embedExternal.iframe( exMedia.url, settings, blockID, loop ) }}
            {% endfor %}

            {{- include( settings.mediaComponent ??? settings.mediaTreatment ??? '_components/cards/media/_router', {
                urls    : urls,
                assets  : assets,
                source  : source,
                settings: settings
            }, withContext = false ) -}}
        {% endblock %}

    {% endembed %}
{% endif %}
