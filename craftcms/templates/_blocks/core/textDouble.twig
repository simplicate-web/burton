{## Text Double Block Base
 ------------------------------------------------------------------------------------ ##
    -> http://localhost:8000/sitebook/blocks/textDouble
 ------------------------------------------------------------------------------------ ##}
{% extends "_blocks/core/block" %}


{## Render the block using a two-zone micro-layout
 ------------------------------------------------------------------------------------ ##
    -> http://localhost:8000/sitebook/layout/micro-layouts
    -> http://buildwithburton.com/docs/micro-layouts
 ------------------------------------------------------------------------------------ ##}
{% block content %}

    {% from "_layout/core/micro" import layout as renderMicroLayout %}
    {# renderMicroLayout( layoutName, [ zone1, zone2, header, footer ], { arg1: x, .. } )
     -------------------------------------------------------------------------------- ##}
    {{ renderMicroLayout(
        block.settings.microLayout|default(),

        [ block('content_text'), block('content_text2'),
          block('block_header'), block('block_footer') ],

        { container : block.settings.container|default() }
    ) }}

{% endblock content %}


{## Default handler for a second block text field
 ------------------------------------------------------------------------------------ ##
    This block can be overridden in a child template
 ------------------------------------------------------------------------------------ ##}
{% block content_text2 %}{% apply spaceless %}

    {## Extra Redactor/CKEditor Filtering (optional, but often useful)
     -------------------------------------------------------------------------------- ##
        processRichHtml() is a custom twig function that parses the html DOM, makes
        minor adjustments and does some rudimentary context-aware content separation.

        The macro code is reviewable / edidable locally:
         -> craftcms/modules/gearbox/src/twigextensions/GearboxTwigExtension.php
    ------------------------------------------------------------------------------------ ##}
    {% set processedText2 = processedText2 ??? processRichHtml( block.text2 ??? null ) %}

    {## this is equivilent to just outputting {{ block.text2 }} ##}
    {% if processedText2 %}
        {{ processedText2.eyebrow  | raw }}
        {{ processedText2.headline | raw }}
        {{ processedText2.body     | raw }}
        {{ processedText2.cta      | raw }}
    {% endif %}
{% endapply %}{% endblock %}