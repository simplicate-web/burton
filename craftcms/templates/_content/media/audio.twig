{% set asset    = asset    ??? null %}
{% set settings = settings ??? null %}

{% if asset %}
    {% set poster = asset.images|first %}

    {% set audioCover = {
        mode    : 'crop',
        width   : 800,
        height  : 150,
        quality : 75,
        position: 'top-center'
    } %}

    <div class="{{settings.audioPlayerClass|default()}}" x-data="{ poster: {{ poster ? 'true' : 'false' }} }" x-cloak>
        {% if poster.url|default() %}
            {% if poster.id|default() %}
                {% do poster.setTransform(audioCover) %}
            {% endif %}

            <img
                src="{{poster.url}}"
                class="h-full w-full object-cover cursor-pointer min-h-48 block"
                x-on:click="document.getElementById('audio--{{asset.id??null}}').play()"
            >
        {% endif %}

        <audio
            id="audio--{{asset.id??null}}"
            controls
            {% if settings.autoplay|default() %}autoplay{% endif %}
            class="block w-full max-w-4xl bg-[#f1f3f4] rounded-none"
            ><source src="{{asset.url??null}}" type="{{asset.mimeType??null}}" />
        </audio>

        {# <div class="text-right mt-1">
            <a href="#">Read transcript â†’</a>
        </div> #}
    </div>
{% endif %}