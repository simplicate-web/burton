{## Media Content - Card Override
 ------------------------------------------------------------------------------------ ##
    This file not typically called directly. It is dynamically inserted to a cards
    inheritence order when generated via the `render()` macro in `_cards/base`.

    `layout` should contain the path for the card layout to be rendered.
    If it is empty for some reason, default to the base card layout.
 ------------------------------------------------------------------------------------ ##}
{% extends layout|default('_cards/base') %}
{% use "_cards/parts.images" with images_media_player as media_player %}


{% block card_image %}
    {% if card_type|default() == 'detail' %}
        {{ block('media_player') }}
    {% else %}
        {% from "_content/images/frame" import framer %}
        {% set images = card.images ??? card.item.embed.images %}
        {{ framer( images, card.settings.cardImageFrame ??? null, card.settings ) }}
    {% endif %}
{% endblock %}


{% block card_after_image %}
    {% if card.item.embed.authorName|default() and card.item.embed.authorUrl|default() %}
        <div class="flex justify-end">
            <a class="flex items-center justify-end gap-1 px-1 mt-0.5 text-sm uppercase" href="{{ card.item.embed.authorUrl }}" target="_blank">
                <span>{{ include( "vectors/youtube.svg" ) }}</span>
                <span>{{ card.item.embed.authorName}}</span>
            </a>
        </div>
    {% endif %}
{% endblock %}


{% block card_summary %}
    {% if card_type|default() == 'detail' %}
        {% import "_layout/core/markup" as markup %}
        {{ markup.summaryMaxH4( card.summary ??? null ) | retconAttr( 'p', { class: 'html smaller' } ) }}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}


{% block card_action %}
    {% if card_type|default() != 'detail' %}
        {{ block( 'action_modal_bottom', "_cards/parts.actions" ) }}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}