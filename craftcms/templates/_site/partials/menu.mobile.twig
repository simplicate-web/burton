<div
    class="flex my-auto"
    x-cloak
    x-data="{
        open: false
    }"
    x-init="$watch('open', value => ( value ) ? document.body.classList.add('hasMobileMenu') : document.body.classList.remove('hasMobileMenu') )"
    @openMobileMenu="open=true"
>

    <!-- Modal -->
    <div
        x-show="open"
        style="display: none"
        x-on:keydown.escape.prevent.stop="open=false ; $dispatch('closeMobileMenu')"
        role="dialog"
        aria-modal="true"
        aria-label="Site Navigation"
        class="fixed inset-0 z-max overflow-y-auto"
    >
        <!-- Overlay -->
        <div x-show="open" x-transition.opacity class="fixed inset-0 bg-black/70"></div>

        <!-- Panel -->
        <div
            x-show="open" x-transition
            x-on:click="open=false ; $dispatch('closeMobileMenu')"
            data-theme="base"
            class="relative flex min-h-screen items-center justify-center p-4"
        >
            <div
                x-on:click.stop
                x-trap.noscroll.inert="open"
                class="relative w-full max-w-2xl overflow-y-auto rounded-xl p-12 shadow-lg"
            >

                {{ include( "_site/base/menu.list", {
                    _settings: {
                        menuHandle: 'primary'
                    }
                }, withContext = false ) }}

                <div class="mt-8 flex space-x-2">
                    <button
                        class="button"
                        x-on:click="open = false"
                    >Close</button>
                </div>
            </div>
        </div>
    </div>
</div>


{% macro trigger() %}
    <span class="flex items-center lg:hidden" x-on:click="$dispatch('openMobileMenu')">
        <button type="button" class="bg-none p-0 m-0">
            {{ include( '_site/svg/hamburger.svg' ) }}
        </button>
    </span>
{% endmacro %}