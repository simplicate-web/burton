{% macro default( content = null, settings = null ) -%}
    {%- set content  = content  is not null and content  is not iterable ? content|trim : '' -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}
    {{- content ? raw( content ) -}}
{%- endmacro %}



{% macro callout__quote( content = null, settings = null ) -%}
    {%- set content  = content  is not null and content  is not iterable ? content|trim : '' -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}
    {%- if content -%}
        <div class="p-8">
            {{- raw( content ) -}}
        </div>
    {%- endif -%}
{%- endmacro %}


{% macro callout__info( content = null, settings = null ) -%}
    {%- set content  = content  is not null and content  is not iterable ? content|trim : '' -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}
    {%- if content -%}
        <div class="bg-canvas-light p-8 border border-canvas-dark rounded @container">
            {{- raw( content ) -}}
        </div>
    {%- endif -%}
{%- endmacro %}



{% macro card__summary( content = null, settings = null ) -%}
    {% set content = content ??? null %}
    {% if content %}
    <p class="line-clamp-3 !mb-0">
        {{ content
            | retconRemove( [ 'img', 'blockquote' ] )
            | retconChange( [ 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'ul', 'ol', 'li', 'p' ], false )
        }}
    </p>
    {% endif %}
{% endmacro %}



{% macro block__header( content = null, settings = null ) -%}
    {%- set content  = content  is not null and content  is not iterable ? content|trim : '' -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}
    {%- if content %}<div class="@container after:block after:content-[''] after:h-8 @3xl:after:h-12 @7xl:after:h-18">{{ raw( content ) }}</div>{% endif -%}
{%- endmacro %}




{% macro block__footer( content, settings ) -%}
    {%- set content  = content  is not null and content  is not iterable ? content|trim : '' -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}
    {%- if content %}<div class="@container before:block before:content-[''] before:h-8 @3xl:before:h-12 @7xl:before:h-18r">{{ raw( content ) }}</div>{% endif -%}
{%- endmacro %}



{% macro image__caption( content = null, settings = null ) %}
    {%- set content  = content  is not null and content  is not iterable ? content|trim : '' -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}

    {% set captionlayer = settings.captionlayer %}

    {% if caption.alt and not caption.summary %}
        {% set caption = caption | merge({ summary: "<p>#{caption.alt}</p>" }) %}
    {% endif %}

    {% set title = tag( 'strong', { class: 'block text-sm uppercase', text: caption.title ?? null } ) %}
    {% set content = caption.summary ?? null %}

    {% set content = content
        | retconChange( 'p', 'div' )
        | retconAttr( 'div', { class: 'text-sm' }, false ) %}

    {% if captionlayer == 'title' and title %}
        <figcaption class="text-center">
            {{ title | raw }}
        </figcaption>
    {% endif %}

    {% if captionlayer == 'caption' and content %}
        <figcaption class="text-center">
            {{ content | raw }}
        </figcaption>
    {% endif %}

    {% if captionlayer == 'full' and ( title ??? content ) %}
        <figcaption class="text-center">
            {{ title | raw }}
            {{ content | raw }}
        </figcaption>
    {% endif %}
{% endmacro %}
