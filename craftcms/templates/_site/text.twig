{## Text Layer Adjustments   [Site Specific]
{-------------------------------------------------------------------------------------##}


{## Basic Eyebrow
{-------------------------------------------------------------------------------------##}
{% macro eyebrow__basic( text, settings ) -%}
    {%- set text  = text ??? null -%}
    {%- set icon  = settings.eyebrowicon  ??? null -%}
    {%- set align = settings.eyebrowalign ??? '' -%}

    {%- if text or icon -%}
        <div class="eyebrow table {{align}}">
            <div class="flex flex-col gap-3" data-eyebrow="basic">
                {% if icon %}
                    {{ tag( 'div', { html: svg("@appicons/#{icon}.svg")
                        | attr({ class: ["w-10 fill-theme-accent", align] }) }) }}
                {% endif %}
                {{ tag('span', { class: 'text-sm @xl:text-lg uppercase font-headline text-theme-accent font-bold', text: text }) }}
            </div>
        </div>
    {% endif %}
{%- endmacro %}

{% macro eyebrow__centerbasic( text, settings ) -%}
    {{ _self.eyebrow__basic( text, settings | merge({ eyebrowalign: 'mx-auto' }) ) }}
{% endmacro %}



{## Image Captions
{-------------------------------------------------------------------------------------##}
{% macro image__caption( content, settings ) -%}
    {%- set content  = content  ??? null and content  is not iterable ? content|trim : '' -%}
    {%- set settings = settings ?? null is iterable ? settings : {} -%}

    {% set captionlayer = settings.captionlayer ??? 'default' %}

    {% if caption.alt and not caption.summary %}
        {% set caption = caption | merge({ summary: "<p>#{caption.alt}</p>" }) %}
    {% endif %}

    {% set title = tag( 'strong', { class: 'block text-sm uppercase', text: caption.title ?? null } ) %}
    {% set content = caption.summary ?? null %}

    {% set content = content
        | retconChange( 'p', 'div' )
        | retconAttr( 'div', { class: 'text-sm' }, false ) %}

    {% if captionlayer == 'title' and title %}
        <figcaption class="text-center">
            {{ title | raw }}
        </figcaption>
    {% endif %}

    {% if captionlayer == 'caption' and content %}
        <figcaption class="text-center">
            {{ content | raw }}
        </figcaption>
    {% endif %}

    {% if captionlayer == 'full' and ( title ?? content ) %}
        <figcaption class="text-center">
            {{ title | raw }}
            {{ content | raw }}
        </figcaption>
    {% endif %}
{% endmacro %}
