{% extends "_content/images/base" %}

{% block image %}{% if images ??? null %}

    {% from "_content/images/frame" import framer %}
    {% import "_layout/core/grids" as grids %}

    {## set grid columns dynamically based on how many images there are ##}
    {% set gridName = gridName ??? settings.imageGrid ??? null %}
    {% if not gridName %}
        {% set gridName = images|length < 3 ? 'fixed' ~ images|length : 'stacked3' %}
        {% set gridName = images|length == 4 or images|length == 8  ? 'stack2grow4' : gridName %}
        {% set gridName = images|length == 6 or images|length == 12 ? 'stacked6'    : gridName %}
    {% endif %}

    {% set frame = frame ??? 'auto' %}

    {% set imageLoop %}
        {% for image in images ??? null %}
            {{ framer( image, frame ??? null, settings ??? null ) }}
        {% endfor %}
    {% endset %}

    {{ grids.generate( imageLoop, gridName ) }}

{% endif %}{% endblock %}