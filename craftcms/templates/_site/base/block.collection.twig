{## Collection Block Site Base
 ------------------------------------------------------------------------------------ ##
    -> http://localhost:8000/sitehub/blocks/collection
 ------------------------------------------------------------------------------------ ##}
{% extends [ "_core/block.collection" ] %}

{% import "_core/assemble" as assemble %}

{% block content %}
    {% set source    = block.source|default('items') %}
    {% set interface = block.interface.value ??? block.interface ??? null %}
    {% set interfaci = [ 'pagination', 'fullSearch', 'filterByFeed', 'loadMore' ] %}

    {% set renderer  = source == 'feed' and interface in interfaci ? 'sprig' : 'base' %}

    {{ assemble.micro( block.settings.microLayout|default('topBottom'), {
        zone1    : block('block__text'),
        zone2    : renderer == 'sprig'
                     ? block('block__collection__sprig')
                     : block('block__collection'),
        header   : block('block__header'),
        footer   : block('block__footer'),
        container: block.settings.container|default()
    } ) }}
{% endblock content %}


{% block block__collection__sprig %}

    {% set interface = block.interface.value ??? block.interface ??? null %}
    {% set template  = "_site/partials/search.full.sprig" %}

    {{ sprig( template, {
        settings: block.settings | merge( {
            limit     : block.limit ??? null,
            interface : block.interface.value ??? block.interface ??? null,
            collectIds: block.collections.ids() ?? block.feeds.ids() ?? block.feeds ??? null,
        } ),
    }) }}
{% endblock %}