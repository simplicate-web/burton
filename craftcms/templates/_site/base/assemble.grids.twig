{## Grid Layout Generator
 ------------------------------------------------------------------------------------ ##

    Mobile ready named layouts for slapping a grid-based wrapper div (or whatever)
    around one (or many) elements. Used extensively within Collection & Media blocks.

    - http://localhost:8000/sitehub/layout/grids
    - http://localhost:8000/sitehub/blocks/collection
    - http://localhost:8000/sitehub/blocks/media

 ------------------------------------------------------------------------------------ ##

 !! This macro outputs as JSON so that it can be read by the macro template or any
    other place it might be useful (like Sitehub reference pages).

 ------------------------------------------------------------------------------------ ##}
{% macro definitions() %}{{ {

    fixed1: {
    _:'## Single column with row-gap.',
        base: 'grid w-full',
        gap : 'gap-8 @3xl:gap-16 @7xl:gap-24',
        cols: 'grid-cols-1',
        min : 1
    },

    fixed1Narrow: {
    _:'## Narrow single column with row-gap.',
        base: 'grid w-full',
        gap : 'gap-8 @3xl:gap-16 @7xl:gap-24',
        cols: 'grid-cols-1 mx-auto max-w-2xl',
        min : 1
    },

    fixed2: {
    _:'## Two columns wide at all widths.',
        base: 'grid w-full',
        gap : 'gap-8 @3xl:gap-16 @7xl:gap-24',
        cols: 'grid-cols-2',
        min : 2,
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 2, gap: '4rem' },
                1280: { gap: '2rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    fixed2Narrow: {
    _:'## Two columns wide at all widths.',
        base: 'grid w-full',
        gap : 'gap-8 @3xl:gap-16 @7xl:gap-24',
        cols: 'grid-cols-2 mx-auto max-w-7xl',
        min : 2,
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 2, gap: '4rem' },
                1280: { gap: '2rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    stacked2: {
    _:'## Two columns wide if *parent* is >672px',
        base: 'grid w-full',
        cols: 'grid-cols-1 @md:grid-cols-2',
        min : 2,
        gap : 'gap-4 @xl:gap-8 @4xl:gap-12 @7xl:gap-16',
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 2, gap: '4rem' },
                1280: { gap: '2rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    stacked2Narrow: {
    _:'## Two columns wide if *parent* is >672px',
        base: 'grid w-full',
        cols: 'grid-cols-1 @md:grid-cols-2 mx-auto max-w-7xl',
        min : 2,
        gap : 'gap-4 @xl:gap-8 @4xl:gap-12 @7xl:gap-16',
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 2, gap: '4rem' },
                1280: { gap: '2rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    stack2grow4: {
    _:'## Liked stacked2 but grows to four-wide above tablet width (768px).',
        base: 'grid w-full',
        cols: 'grid-cols-1 @md:grid-cols-2 @3xl:grid-cols-4',
        min : 2,
        gap : 'gap-4 @md:gap-8 @3xl:gap-4 @4xl:gap-8 @5xl:gap-12',
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 4, gap: '4rem' },
                1280: { gap: '2rem' },
                768 : { perPage: 2, gap: '1rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    fixed3: {
    _:'## Three columns wide at all widths.',
        base: 'grid w-full',
        cols: 'grid-cols-3',
        min : 3,
        gap : 'gap-4 @3xl:gap-8 @5xl:gap-12 @7xl:gap-16',
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 3, gap: '4rem' },
                1280: { gap: '2rem' },
                1024: { perPage: 2, gap: '1rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    stacked3: {
    _:'## Three columns wide if *parent* >896px. Two-wide between 448-896px.',
        base: 'grid w-full',
        cols: 'grid-cols-1 @md:grid-cols-2 @4xl:grid-cols-3',
        min : 3,
        gap : 'gap-8 @5xl:gap-12 @7xl:gap-16',
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 3, gap: '4rem' },
                1280: { gap: '2rem' },
                1024: { perPage: 2, gap: '1rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    stacked4: {
    _:'## Four columns wide if *parent* >896px. Two-wide between 448-896px.',
        base: 'grid w-full',
        cols: 'grid-cols-1 @md:grid-cols-2 @4xl:grid-cols-4',
        min : 3,
        gap : 'gap-8 @5xl:gap-12 @7xl:gap-16',
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 4, gap: '3rem' },
                1280: { gap: '2rem' },
                1024: { perPage: 2, gap: '1rem' },
                640:  { perPage: 1 }
            }
        }"
    },

    stacked6: {
    _:'## Six-wide if *parent* >1024px; Three-wide under 768px; Four-wide inbetween.',
        base: 'grid w-full',
        cols: 'grid-cols-3 @3xl:grid-cols-4 @5xl:grid-cols-6',
        min : 5,
        gap : 'gap-4 @3xl:gap-8',
        splideConfig: "{
            type: 'loop',
            breakpoints: {
                9999: { perPage: 6, gap: '4rem' },
                768 : { perPage: 4, gap: '2rem' },
                640:  { perPage: 2 }
            }
        }"
    }
} | json_encode() | raw }}{% endmacro %}


{% macro generate( grid = null, html = [] ) %}

    {% set grid = grid | trim ??? 'fixed1' %}
    {% set json = _self.definitions() | json_decode %}

    {% set defs = json[grid] ??? json.fixed1 ??? null %}
    {% set html = html is iterable ? html : [html] %}

    {{ tag( 'div', {
        html : html|join(''),
        data : { grid: grid },
        class: [
            defs.base|default("w-full"),
            defs.cols|default(),
            defs.gap|default()
        ]
    }) }}
{% endmacro %}