{## Site Specific Collection Block
 ------------------------------------------------------------------------------------ ##
    -> http://localhost:8000/sitehub/blocks/collection
 ------------------------------------------------------------------------------------ ##}
{% extends [ "_core/block.collection" ] %}

{% block content %}
    {% set settings = settings ??? block.settings ??? {}  %}
    {% set variant  = settings.variant ??? 'assemble' %}
    {{ variant == 'search' ? block('block__search') : block( 'block__assemble' ) }}
{% endblock content %}


{% block block__assemble %}
    {% set settings    = settings ??? block.settings ??? {}  %}
    {% set microlayout = settings.microlayout ??? 'zone1Top' %}

    {% import "_core/assemble" as assemble %}
    {{ assemble.microlayout( microlayout, {
        zone1    : block('block__text'),
        zone2    : block('block__collection'),
        header   : block('block__header'),
        footer   : block('block__footer')
    }, settings ) }}
{% endblock %}


{% block block__search %}
    {% set settings    = settings ??? block.settings ??? {}  %}
    {% set collections = block.collections.ids() ??? block.collections ??? null %}

    {{ sprig( "_site/collection.search.sprig", {
        settings   : settings,
        collections: collections,
        zone1      : block('block__text'),
        header     : block('block__header'),
        footer     : block('block__footer')
    }) }}
    {% css %}.sprig-component { width: 100%; }{% endcss %}
{% endblock %}