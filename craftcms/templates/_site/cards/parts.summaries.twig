{## Summary Partials
 ------------------------------------------------------------------------------------ ##
    Reusable summary options for cards.

    This file is a structured for Horizontal Reuse. As such, it CAN NOT {% extend %}
    another template or declare a local {% macro %}. It also must not output any
    content outside of a {% block %} tag.

     -> https://twig.symfony.com/doc/3.x/tags/use.html

    In return, each {% block %} in this file can be loaded into any other templates
    as if they were native to that file. Imported blocks will retain their block names
    unless new names are assigned during import.

    By default `images_default` {% block %} is imported into the base card template
    `_cards/base/_base` as the named block `card_summary` using:

        {% use "_cards/parts.images" with images_default as card_summary %}


 ## Using a Summary other than the default
 ------------------------------------------------------------------------------------ ##
    There are several options for modifying a card summary:

     1) Swap `summary_default` for a different block from this (or another) file and
        import it overtop of the default `card_summary` named block.

        {% use "_cards/parts.summaries" with summary_truncated as card_summary %}


     2) Create a local override in a card template file:

        {% block card_summary %}
            // -- do something custom and specific here
        {% endblock %}


     3) Combining both (1) and (2) for more complicated functionality

        {% use "_cards/parts.summaries" with summary_truncated, summary_default %}
        {% block card_summary %}
            {{ test_some_condition
                  ? block( 'summary_truncated' )
                  : block( 'summary_default') }}
        {% endblock %}

        Don't forget about or underestimate the usefulness of the Twig `parent` function.
        With `parent` the above code can be refactored to:

        {% use "_cards/parts.summaries" with summary_truncated %}
        {% block card_summary %}
            {{ test_some_condition
                  ? block( 'summary_truncated' )
                  : parent() }}
        {% endblock %}

        Read more: https://twig.symfony.com/doc/3.x/functions/parent.html



 ## Full Summary - (Default)
 ------------------------------------------------------------------------------------ ##
    Don't allow <h1>, <h2>, or <h3>. Retcon them to <h4>
 ------------------------------------------------------------------------------------ ##}
{% block summary_default -%}
    {% import "_layout/core/markup" as markup %}
    {{ markup.summaryMaxH4( card.summary ??? null ) }}
{%- endblock %}



{## Truncated Summary
 ------------------------------------------------------------------------------------ ##
    Same formatting as a Full Summary, but line-clamped to limit length
 ------------------------------------------------------------------------------------ ##}
{% block summary_truncated -%}
    <div class="line-clamp-3">
        {% import "_layout/core/markup" as markup %}
        {{ markup.summaryMaxH4( card.summary ??? null ) }}
    </div>
{%- endblock %}



{## Overflow Summary
 ------------------------------------------------------------------------------------ ##
 ------------------------------------------------------------------------------------ ##}
{% block summary_overflow -%}
    <div class="overflow-y-scroll max-h-[50vh] @container">
        {% import "_layout/core/markup" as markup %}
        {{ markup.summaryMaxH4(
            card.summary|default()
                | retconAttr( 'p,ul,ol', { class: "html" }, false )
                | retconAttr( 'ul,ol',   { class: "pl-8" }, false )
            )
        }}
    </div>
{%- endblock %}