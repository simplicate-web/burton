{## What are we supposed to be rendering?
 ------------------------------------------------------------------------------------ ##}
{% set items      = items    ??? null %}
{% set settings   = settings ??? null %}
{% set cardLayout = settings.cardLayout ??? settings['cardLayout.default'] ??? 'summary' %}
{% set cardGrid   = settings.cardGrid   ??? settings['cardGrid.default']   ??? 'fixed1'   %}


{## Get Carousel Config
 ------------------------------------------------------------------------------------ ##
    By default we store a splideConfig hash in `_layout/core/grids` for each grid
    definition since these are typically modified in unison.
 ------------------------------------------------------------------------------------ ##}
{% import "_layout/core/grids" as grids %}
{% set gridJson = grids.definitions() | json_decode %}


{% embed '_components/carousel/base' with {
    items   : items,
    settings: settings,
    card    : cardLayout,
    config  : gridJson.options[cardGrid].splideConfig ??? null,
} %}

    {% block slide %}
        {% from "_cards/base" import render as renderCard %}
        {{ renderCard( item, card, settings ) }}
    {% endblock %}

    {% block splideConfig %}
        {{ config ??? parent() }}
    {% endblock %}

{% endembed %}