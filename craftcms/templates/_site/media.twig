{## Site Media Elements
{---------------------------------------------------------------------------------------}
    Video, Audio, File, oEmbeds, and other media elements.
{-------------------------------------------------------------------------------------##}
{% extends "_core/media" %}


{% macro carousel( items, settings = null ) -%}
{%- if items -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}
    {% set settings = {
        medialayer: 'posterpreview',
    } | merge( settings ) %}

    {%- import "_assemble" as assemble -%}
    {%- set items = items | map( item => assemble.media( item, settings.medialayer, settings ) ) -%}

    {% embed ['_site/carousel','_core/carousel'] with {
        items: items,
        settings: settings
    } only %}{% endembed %}
{%- endif -%}{%- endmacro %}




{% macro accordion( items, settings = null ) -%}
{%- if items -%}
    {%- set settings = settings is not null and settings is iterable ? settings : {} -%}
    {% set settings = {
        medialayer: 'default'
    } | merge( settings ) %}

    {% embed ['_site/accordion','_core/accordion'] with {
        items     : items,
        settings  : settings,
        medialayer: settings.medialayer,
        firstopen : settings.firstopen ?? false
    } %}
        {% block panel__title "#{item.headline ??? item.alt ??? item.title ??? null}" %}

        {% block panel__content %}
            {%- import "_assemble" as assemble -%}

            {% set textlayer = settings.textlayer ??? 'default' %}

            <div class="flex flex-col gap-8">
                {{ assemble.media( item, medialayer, settings ) }}
                {% if item.summary %}
                    <div class="@container">{{ assemble.text( item.summary, textlayer, settings ) }}</div>
                {% endif %}
            </div>
        {% endblock %}

    {% endembed %}
{%- endif -%}{%- endmacro %}



{% macro grid2( items, settings = null ) %}
    {% import "_assemble" as assemble %}

    {% set flexible   = 'grid items-start grid-cols-1 @md:grid-cols-2 gap-4 @xl:gap-8 @4xl:gap-12 @7xl:gap-16' %}
    {% set fixed      = 'grid items-start grid-cols-2 gap-8 @3xl:gap-16 @7xl:gap-24' %}
    {% set medialayer = settings.medialayer ??? 'default' %}

    {% if items %}
        {% set html %}
            {% for item in items %}
                {{ assemble.media( item, medialayer, settings ) }}
            {% endfor %}
        {% endset %}

        {% set grid = {
            html : html,
            data : { layout: 'grid2flexible' },
            class: flexible
        } %}

        <div class="w-full">{{ tag( 'div', grid ) }}</div>
    {% endif %}
{% endmacro %}




{% macro grid3( items, settings = null ) %}
    {% import "_assemble" as assemble %}

    {% set flexible   = 'grid items-start grid-cols-1 @md:grid-cols-2 @lg:grid-cols-3 gap-8 @5xl:gap-12 @7xl:gap-16' %}
    {% set fixed      = 'grid items-start grid-cols-3 gap-4 @3xl:gap-12 @5xl:gap-16 @7xl:gap-20' %}
    {% set medialayer = settings.medialayer ??? 'default' %}

    {% if items %}
        {% set html %}
            {% for item in items %}
                {{ assemble.media( item, medialayer, settings ) }}
            {% endfor %}
        {% endset %}

        {% set grid = {
            html : html,
            data : { layout: 'grid3fixed' },
            class: fixed
        } %}

        <div class="w-full">{{ tag( 'div', grid ) }}</div>
    {% endif %}
{% endmacro %}
