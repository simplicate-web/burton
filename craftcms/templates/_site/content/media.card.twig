{## Media Content - Card Override
 ------------------------------------------------------------------------------------ ##
    This file not typically called directly. It is dynamically inserted to a cards
    inheritence order when generated via the `render()` macro in `_cards/base`.

    `layout` should contain the path for the card layout to be rendered.
    If it is empty for some reason, default to the base card layout.
 ------------------------------------------------------------------------------------ ##}
{% extends layout|default(["_site/base/card","_core/card"]) %}
{# {% use "_cards/parts.images" with images_media_player as media_player %}

{% block summary_card_text   %}{% endblock %}
{% block summary_card_action %}{% endblock %}

{% block card_image %}
    {% if card_type|default() in ['summary','detail'] %}
        {{ block('media_player') }}
    {% else %}
        {% if card_type|default() in ['thumbnail'] %}
            {% import "_core/assemble" as assemble %}
            {% set images = card.item.entry.images.all() ??? card.images ??? card.item.embed.images %}
            {{ assemble.frame( images, card.settings.cardImageFrame|default('fill'), card.settings ) }}
        {% endif %}
    {% endif %}
{% endblock %}


{% block card_headline %}
    {% if card_type|default() in ['modal'] %}
        {% set card = card|merge({ 'settings': card.settings|merge({ autoplay: true }) }) %}
        {% if card.images %}
            <div class="mb-8">{{ block('media_player') }}</div>
            {{ parent() }}
        {% else %}
            {{ parent() }}
            <div class="mb-8">{{ block('media_player') }}</div>
        {% endif %}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}

{% block card_after_image %}
    {% if card.item.embed.authorName|default() and card.item.embed.authorUrl|default() %}
        <div class="flex justify-end">
            <a class="flex items-center justify-end gap-1 px-1 mt-0.5 text-sm uppercase" href="{{ card.item.embed.authorUrl }}" target="_blank">
                <span>{{ include( "vectors/youtube.svg" ) }}</span>
                <span>{{ card.item.embed.authorName}}</span>
            </a>
        </div>
    {% endif %}
{% endblock %}


{% block card_summary %}
    {% if card_type|default() in ['detail','modal'] %}
        {% import "_layout/core/markup" as markup %}
        {{ markup.summaryMaxH4( card.summary ??? null ) | retconAttr( 'p', { class: 'html smaller' } ) }}
    {% else %}
        {{ parent() }}
    {% endif %}
{% endblock %}


{% block card_action %}
    {% if card_type|default() in ['thumbnail'] %}
        {{ block( 'action_modal', "_cards/parts.actions" )}}
    {% else %}

    {% endif %}
{% endblock %} #}