{## Page & Landing Page Entry Router
 ------------------------------------------------------------------------------------ ##}
{% set template  = null %}
{% set entryType = entry.type.handle|default(null) %}

{% if entryType == 'redirect' and entry.redirect.url ??? null %}
    {% redirect entry.redirect.url %}
{% endif %}

{% if entryType == 'standard' %}
    {% set template = "_site/content/pages.standard" %}
{% endif %}

{% if entryType == 'sidebar' %}
    {% set template = "_site/content/pages.sidebar" %}
{% endif %}

{% if entryType == 'landingPages' %}
    {% set template = "_site/content/pages.standard" %}

    {% if entry.sidebarBuilder.one() ??? null %}
        {% set template = "_site/content/pages.sidebar" %}
    {% endif %}
{% endif %}

{% if entryType and template %}
    {{ include( template ) }}
{% else %}
    {% header "HTTP/1.0 404 Not Found" %}
{% endif %}


{## Generate the URI for page entries
 ------------------------------------------------------------------------------------ ##
    Often easier than trying to cram a bunch of conditional twig logic into the tiny
    space provided by the URI Format field in the control panel.

    However, you do need to trigger a manual resave of all entries if you change
    the URI sturcture in the below macro for existing records.
 ------------------------------------------------------------------------------------ ##}
{% macro uri( object ) -%}
    {{ object.type.handle == 'landingPages' ? 'go' : object.parent.uri }}/{{ object.slug}}
{%- endmacro %}