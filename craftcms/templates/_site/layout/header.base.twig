{## Page Header (<header>) Base Elements & Defaults
 ------------------------------------------------------------------------------------ ##

    Defaults & common elements that appear in and around the site-wide page <header>.

    - http://localhost:8000/sitehub/layout/header

------------------------------------------------------------------------------------ ##}

{% block header__base %}
    {% import "_core/blocks/assemble" as blocks %}
    {% import "_site/layout/assemble" as layout %}
    {% import "_site/text" as format %}

    {% set headerBlocks    = normalizeBlocks( entry.headerBuilder.all() ??? null, 'header', { container: 'fluid' } ) %}
    {% set builderInTopbar = ( headerBlocks[0].settings.interspaceAbove ??? false == 'topbar' ) %}

    {% if not headerBlocks or not builderInTopbar %}
        {{ block('header__topbar') }}
        {{ block('header__breadcrumb') }}
    {% endif %}

    {{ layout.openHeader() }}

    {% set headerContent = headerBlocks
        ? blocks.builder( headerBlocks, 'header' )
        : layout.container( 'title', format.plainHeader1( entry.title ??? null, entry.subtitle ??? null ) ) %}

    {% block header__content %}
        {{ headerContent }}
    {% endblock %}

    {{ layout.closeHeader() }}

    {% if headerBlocks and builderInTopbar %}
        {{ block('header__breadcrumb') }}
    {% endif %}
{% endblock %}


{% block header__breadcrumb %}
    <div data-theme="shade">
        {% import "_site/layout/assemble" as layout %}
        {{ layout.container( 'fluid', layout.menu( 'header.breadcrumb' ) ) }}
    </div>
{% endblock %}


{% block header__topbar %}
    {% import "_site/layout/assemble" as layout %}

    <div {{ attr({ class: ["w-full relative z-50"], data: { theme: 'accent-header' } }) }}>

        {{ layout.openContainer( 'fluid' ) }}

        <div class="flex">

            {% block header__topbar__logo %}
                <div class="flex items-center w-full gap-8">
                    {{ block( "logo", "_site/atoms/logo" ) }}
                </div>
            {% endblock %}

            {% block header__topbar__navigation %}
                <div class="w-full lg:flex flex-col flex-grow text-right items-end gap-6">
                    {% block header__topbar__navUtility %}
                        <div class="flex items-center gap-3">
                            {% import "_site/layout/assemble" as layout %}
                            {{ layout.menu( 'header.utility' ) }}
                        </div>
                    {% endblock %}

                    {% block header__topbar__navPrimary %}
                        <div class="flex items-center gap-6">
                            {% import "_site/layout/assemble" as layout %}
                            {{ layout.menu( 'header.primary' ) }}
                        </div>
                    {% endblock %}

                    {% block header__topbar__navMobileTrigger %}
                        {% import "_site/layout/assemble" as layout %}
                        {{ layout.mobileMenuTrigger() }}
                    {% endblock %}
                </div>
            {% endblock %}
        </div>

        {{ layout.closeContainer() }}

    </div>
{% endblock %}