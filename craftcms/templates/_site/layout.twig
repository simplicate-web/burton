
{% extends "_site/html" %}

{## Single Column Base Layout
 ------------------------------------------------------------------------------------- ##
    - AJAX / htmx requests
        - Served "chromeless" content only for in-page modals via {% block page__ajax %}.
        - No <header> or <footer> elements included by default.
        - See: `templates/_core/pages/page.ajax.twig`

    - Header (Base)
        - Logo & Branding
        - Primary Navigation
        - Breadcrumb Navigation
        - Renders the `entry.headerBuilder` matrix builder (if present)
        - Use {% set entry = { title: "Title", "subtitle": "..." } %} to auto-populate
          the base header if using as a base template for static routes.

    - Content (Single Column)
        - Overload {% block content "" %} if using as a base template for static routes.
        - Automatically adds a spacer before and after the content block.
        - Overload {% block main__content %} to avoid auto-spacers
        - Otherwise, renders `entry.bodyBuilder` matrix builder (if present)

    - Fat Footer (Base)
        - Call to Action
        - Contact & Social Links
        - Userflow / Quicklinks
        - Legal Navigation
 ------------------------------------------------------------------------------------- ##}
{% import "_core/assemble" as assemble %}

{% block page %}
    {% block page__top    block( 'header__base', '_site/header' ) %}
    {% block page__main   block( 'main__base' ) %}
    {% block page__bottom block( 'footer__base', '_site/footer' ) %}
{% endblock %}


{% block page__ajax %}{{
    assemble.builder( mainblocks ??? entry.bodyBuilder.all() ??? [], 'ajax', {
        container  : "none",
        spacerabove: "small",
        spacerbelow: "small"
    })
}}{% endblock %}


{% block main__base %}
    {% block main__open    raw( "<main " ~ attr({ id: "content", class: "relative z-10 min-h-[50vh]" }) ~ ">" ) %}
    {% block main__content block('content') %}
    {% block main__close   "</main>" %}
{% endblock %}


{% block content %}

    {% set firstspace = "default" %}

    {% set mainblocks = mainblocks ??? entry.bodyBuilder.all() ??? [] %}
    {% if mainblocks %}
        {% set headblocks = headblocks ??? entry.headerBuilder.all() ??? [] %}
        {% set theme1 = headblocks ? headblocks[0].theme.value ??? 'base' : 'base' %}
        {% set theme2 = mainblocks[0].theme.value ??? 'base' %}
        {% set firstspace = theme1 == theme2 ? "none" : firstspace %}
    {% endif %}

    {{- assemble.builder( mainblocks, 'singlecol', {
        container  : "fluid",
        spacerfirst: firstspace,
        spacerabove: "default",
        spacerbelow: "default"
    })
}}{% endblock %}