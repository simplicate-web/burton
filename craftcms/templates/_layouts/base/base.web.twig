{% set _layout = _layout is defined and _layout is iterable ? _layout : {} %}
{% set _layout = {
    title: null,
    className: null,
    bodyClass: null,
}|merge(_layout) %}

{% extends "_globalConfig" %}

{%- block htmlPage -%}
    <!doctype html>
    <html
        prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb#"
        lang="{{ craft.app.language |slice(0,2) }}"
        class="
            no-js
            font-body
            text-gray-700
            opacity-100
            visible
            scroll-smooth"
        >

        <head>
            {## meta tags or css that need to be inside <head> ##}
            {{ include("_layouts/partials/head-meta", { prefetchUrls: prefetchUrls }, withContext = false) }}
            {% block headMeta %}{% endblock headMeta %}

            {## web fonts ##}
            {{ include( "_layouts/partials/head-fonts", {}, withContext = false) }}

            {## javascript that needs to be included inside <head> ##}
            {{ include("_layouts/partials/head-js", {}, withContext = false) }}
            {% block headJs %}{% endblock headJs %}

            {## css generated by vite + critical CSS ##}
            {{ include( "_layouts/partials/head-css", {
                criticalPath: null
            }, withContext = false ) }}
        </head>

        <body
            class="m-0 p-0 {{_layout.bodyClass ??? _layout.className}}"

            {## automatically adds X-Requested-With:XMLHttpRequest to and
                htmx get requests - https://htmx.org/extensions/ajax-header ##}
            hx-ext="ajax-header"
        >

            {## accessibility jump nav ##}
            {{ include( "_components/a11y/skipNav", {}, withContext = false) }}

            {## primary page content ##}
            {% block bodyHtml %}{% endblock bodyHtml %}

            {## fixed position components ##}
            <div id="bodyComponents">

                {## dynamic htmx / alpine JS content modal ##}
                {{ include( "_components/modal/dynamic", {}, withContext = false) }}

                {## page specific components ##}
                {% block bodyComponents %}{% endblock bodyComponents %}
            </div>
        </body>
    </html>
{%- endblock -%}