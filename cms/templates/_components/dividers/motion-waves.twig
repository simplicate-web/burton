{% set blockAbove = blockAbove ?? null %}
{% set blockBelow = blockBelow ?? null %}
{% set entry      = entry      ?? null %}

{% set bgColorTw    = blockAbove.settings.scene.bgColor ?? 'black' %}
{% set waveColorHex = blockBelow.settings.scene.bgHex   ?? '#fff'  %}

<div class="waves bg-{{bgColorTw}}">
    <svg class="w-full" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto">
        <defs>
            <path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"></path>
        </defs>
        <g class="parallax">
            <use xlink:href="#gentle-wave" x="48" y="0" fill="rgba({{waveColorHex|hex2rgb}},0.7"></use>
            <use xlink:href="#gentle-wave" x="48" y="3" fill="rgba({{hex2rgb(waveColorHex)}},0.5)"></use>
            <use xlink:href="#gentle-wave" x="48" y="5" fill="rgba({{hex2rgb(waveColorHex)}},0.3)"></use>
            <use xlink:href="#gentle-wave" x="48" y="7" fill="{{waveColorHex}}"></use>
        </g>
    </svg>
</div>

<div class="cSpacer h-12"></div>

{% css %}

.waves {
  position: relative;
  z-index: 20;
  margin-top: -30px;
  width: 100%;
  margin-bottom:-7px; /*Fix for safari gap*/
  min-height:80px;
  max-height:80px;
}

.waves svg {
  min-height:80px;
  max-height:80px;
}

/* Animation */
.parallax > use {
  animation: move-forever 35s cubic-bezier(.55,.5,.45,.5) infinite;
}

.parallax > use:nth-child(1) {
  animation-delay: -2s;
  animation-duration: 10s;
}

.parallax > use:nth-child(2) {
  animation-delay: -3s;
  animation-duration: 16s;
}

.parallax > use:nth-child(3) {
  animation-delay: -4s;
  animation-duration: 22s;
}

.parallax > use:nth-child(4) {
  animation-delay: -5s;
  animation-duration: 18s;
}

@keyframes move-forever {
  0% {
   transform: translate3d(-90px,0,0);
  }
  100% { 
    transform: translate3d(85px,0px,0);
  }
}
/*Shrinking for mobile*/
@media (max-width: 768px) {
  .waves {
    height:40px;
    min-height:40px;
  }
}
{% endcss %}