{% extends blockConfig.layout %}
{% use "_builders/blocks/_default" %}

{% set items         = items ??? [] %}
{% set itemComponent = itemsConfig.component ??? null %}
{% set overrideCard  = content.card.reference() ??? null %}
{% set cardLayout    = overrideCard.useCard ??? itemsConfig.useCard ??? '' %}
{% set buttonClass   = itemsConfig.buttons   ??? null %}

{% set content1Hide  = not text|trim %}

{% block content2 %}
    {% if itemComponent %}
        {{ include(itemComponent) }}
    {% else %}
        {% for item in items %}
            {% if buttonClass %}
                {% set item = {
                    headline: item.headline,
                    images: item.images,
                    text: item.text|retconAttr( "a.button", { class: buttonClass } )
                } %}
            {% endif %}
       
            {{ include(cardLayout, {
                entry: item,
                loop: loop
            }, withContext = false ) }}
        {% endfor %}
    {% endif %}
{% endblock %}


{% block content3 %}
    {{ include( mediaConfig.component ??? '_components/media/image', {
        images: images ??? [],
        transform: mediaConfig.transform ??? null,
    }) }}
{% endblock %}